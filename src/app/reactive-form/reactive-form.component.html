<h1 class="form-title">{{ formConfig.title }}</h1>
<form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-container">
  @for(field of formConfig.fields; track field.name) {
    <div class="form-row">
      @if(field.type !== 'checkbox') {
        <label>{{ field.label }}
          <span class="required">{{field.required ? '*':''}}</span>
        </label>
      }

      @if(supportedInputFieldTypes.includes(field.type)) {
        <input [type]="field.type" class="form-input" [formControlName]="field.name" />
      }@else if(field.type === 'textarea') {
        <textarea class="form-textarea" [formControlName]="field.name"></textarea>
      }@else if(field.type === 'checkbox') {
        <div class="form-checkbox">
          <input type="checkbox" [formControlName]="field.name" />
          <label>{{ field.label }}</label>
        </div>
      }@else if(field.type === 'dropdown' || field.type === 'multiselect') {
        <ng-multiselect-dropdown
          [data]="field.options ?? []"
          [settings]="{ singleSelection: field.type === 'dropdown' }"
          [formControlName]="field.name"
          class="multiselect-dropdown">
        </ng-multiselect-dropdown>
      }@else if(field.type === 'radio'){
        <input type="radio" [formControlName]="field.name" hidden />
        <div class="form-checkbox">
            @for(op of field.options;track op){
                <input type="radio" [id]="op" [value]="op" [formControlName]="field.name"/>
                <label [for]="op">{{ op }}</label>
            }
        </div>
    }

      @if(form.get(field.name)?.touched && form.get(field.name)?.invalid) {
        <div class="error-text">
          @if(form.get(field.name)?.errors?.['required']) {
            This field is required
          }
          @if(form.get(field.name)?.errors?.['pattern']) {
            {{ field.validation?.message || 'Invalid format' }}
          }
        </div>
      }
    </div>
  }

  <button type="submit" class="submit-button">Submit</button>
</form>

@if(submittedData) {
  <h2>Submitted Data</h2>
  <ul class="submitted-list">
    @for(field of formConfig.fields; track field.name) {
      @if(submittedData[field.name]){
        <li><strong>{{ field.label }}</strong>: 
            {{ submittedData[field.name] }}
        </li>
      }
    }
  </ul>
}